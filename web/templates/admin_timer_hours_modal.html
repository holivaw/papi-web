<div class="modal-dialog modal-dialog-centered admin-timer-edit-modal">
    <form
            hx-post="{{ url_for('admin-timer-update') }}"
            hx-vals='{"action": "{{ action }}", "admin_event_uniq_id": "{{ admin_event.uniq_id }}"{% if admin_timer %}, "admin_timer_id": "{{ admin_timer.id }}"{% endif %} }'
            hx-swap="multi:#messages,#admin-header,#admin-content"
            hx-indicator="#please-wait">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">
                    Horaires du chronomètre [{{ admin_timer.uniq_id }}]
                </h2>
            </div>
            <div class="modal-body">
                {% if action == 'delete' %}
                    <h3 class="text-danger">
                        Attention : la suppression d'un chronomètre est définitive !
                    </h3>
                {% else %}
                    <h3>
                        Propriétés
                    </h3>
                    <div class="row">
                        <div class="col">
                            {% with id='uniq-id', name='uniq_id' %}
                                <label for="{{ id }}" class="form-label">Identifiant (unique) :</label>
                                <input
                                        name="{{ name }}"
                                        type="text" id="{{ id }}"
                                        class="form-control {% if name in errors %}is-invalid{% else %}is-valid{% endif %}"
                                        aria-describedby="{{ id }}-help {{ id }}-error"
                                        placeholder="Exemple : timer"
                                        value="{{ data[name] }}" />
                                <div id="{{ id }}-help" class="form-text">
                                  L'identifiant unique, utilisé pour référencer le chronomètre.
                                </div>
                                {% if name in errors %}
                                    <div id="{{ id }}-error" class="form-text invalid-feedback">
                                        {{ errors[name] }}
                                    </div>
                                {% endif %}
                            {% endwith %}
                        </div>
                    </div>
                    {% if action == 'update' %}
                        <h3>
                            Couleurs
                        </h3>
                        <div class="row">
                            <div class="col-4">
                                {% with id='color-1', name='color_1' %}
                                    <label for="{{ id }}" class="form-label">Couleur n°1 :</label>
                                    <input
                                            name="{{ name }}"
                                            type="text" id="{{ id }}"
                                            class="form-control {% if name in errors %}is-invalid{% else %}is-valid{% endif %}"
                                            aria-describedby="{{ id }}-help {{ id }}-error"
                                            placeholder="Exemple : {{ admin_event.timer_colors[1] }}"
                                            value="{{ data[name] }}" />
                                    <div id="{{ id }}-help" class="form-text">
                                      La couleur n°1 est utilisée jusqu'à {{ admin_timer.delays[1] }} minutes avant le début des rondes
                                        (délai n°1), la couleur change ensuite progressivement jusqu'à la couleur n°2
                                        ({{ admin_timer.delays[2] }} minutes avant le début des rondes).
                                    </div>
                                    {% if name in errors %}
                                        <div id="{{ id }}-error" class="form-text invalid-feedback">
                                            {{ errors[name] }}
                                        </div>
                                    {% endif %}
                                {% endwith %}
                            </div>
                            <div class="col-4">
                                {% with id='color-2', name='color_2' %}
                                    <label for="{{ id }}" class="form-label">Couleur n°2 :</label>
                                    <input
                                            name="{{ name }}"
                                            type="text" id="{{ id }}"
                                            class="form-control {% if name in errors %}is-invalid{% else %}is-valid{% endif %}"
                                            aria-describedby="{{ id }}-help {{ id }}-error"
                                            placeholder="Exemple : {{ admin_event.timer_colors[2] }}"
                                            value="{{ data[name] }}" />
                                    <div id="{{ id }}-help" class="form-text">
                                      La couleur n°2 est utilisée {{ admin_timer.delays[2] }} minutes avant le début des rondes (délai n°2),
                                        la couleur change ensuite progressivement jusqu'à la couleur n°3 (au début des rondes).
                                    </div>
                                    {% if name in errors %}
                                        <div id="{{ id }}-error" class="form-text invalid-feedback">
                                            {{ errors[name] }}
                                        </div>
                                    {% endif %}
                                {% endwith %}
                            </div>
                            <div class="col-4">
                                {% with id='color-3', name='color_3' %}
                                    <label for="{{ id }}" class="form-label">Couleur n°3 :</label>
                                    <input
                                            name="{{ name }}"
                                            type="text" id="{{ id }}"
                                            class="form-control {% if name in errors %}is-invalid{% else %}is-valid{% endif %}"
                                            aria-describedby="{{ id }}-help {{ id }}-error"
                                            placeholder="Exemple : {{ admin_event.timer_colors[3] }}"
                                            value="{{ data[name] }}" />
                                    <div id="{{ id }}-help" class="form-text">
                                      La couleur n°3 est utilisée à partir du début des rondes et pendant {{ admin_timer.delays[3] }} minutes
                                        (délai n°3).
                                    </div>
                                    {% if name in errors %}
                                        <div id="{{ id }}-error" class="form-text invalid-feedback">
                                            {{ errors[name] }}
                                        </div>
                                    {% endif %}
                                {% endwith %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-4">
                                {% with id='delay-1', name='delay_1' %}
                                    <label for="{{ id }}" class="form-label">Délai n°1 :</label>
                                    <input
                                            name="{{ name }}"
                                            type="text" id="{{ id }}"
                                            class="form-control {% if name in errors %}is-invalid{% else %}is-valid{% endif %}"
                                            aria-describedby="{{ id }}-help {{ id }}-error"
                                            placeholder="Exemple : {{ admin_event.timer_delays[1] }} (minutes)"
                                            value="{{ data[name] }}" />
                                    <div id="{{ id }}-help" class="form-text">
                                    </div>
                                    {% if name in errors %}
                                        <div id="{{ id }}-error" class="form-text invalid-feedback">
                                            {{ errors[name] }}
                                        </div>
                                    {% endif %}
                                {% endwith %}
                            </div>
                            <div class="col-4">
                                {% with id='delay-2', name='delay_2' %}
                                    <label for="{{ id }}" class="form-label">Délai n°2 :</label>
                                    <input
                                            name="{{ name }}"
                                            type="text" id="{{ id }}"
                                            class="form-control {% if name in errors %}is-invalid{% else %}is-valid{% endif %}"
                                            aria-describedby="{{ id }}-help {{ id }}-error"
                                            placeholder="Exemple : {{ admin_event.timer_delays[2] }} (minutes)"
                                            value="{{ data[name] }}" />
                                    <div id="{{ id }}-help" class="form-text">
                                    </div>
                                    {% if name in errors %}
                                        <div id="{{ id }}-error" class="form-text invalid-feedback">
                                            {{ errors[name] }}
                                        </div>
                                    {% endif %}
                                {% endwith %}
                            </div>
                            <div class="col-4">
                                {% with id='delay-3', name='delay_3' %}
                                    <label for="{{ id }}" class="form-label">Délai n°3 :</label>
                                    <input
                                            name="{{ name }}"
                                            type="text" id="{{ id }}"
                                            class="form-control {% if name in errors %}is-invalid{% else %}is-valid{% endif %}"
                                            aria-describedby="{{ id }}-help {{ id }}-error"
                                            placeholder="Exemple : {{ admin_event.timer_delays[3] }} (minutes)"
                                            value="{{ data[name] }}" />
                                    <div id="{{ id }}-help" class="form-text">
                                    </div>
                                    {% if name in errors %}
                                        <div id="{{ id }}-error" class="form-text invalid-feedback">
                                            {{ errors[name] }}
                                        </div>
                                    {% endif %}
                                {% endwith %}
                            </div>
                        </div>
                    {% endif %}
                {% endif %}
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col col-6 text-start">
                        <button type="submit" class="white btn {% if action == 'delete' %}btn-danger{% else %}btn-primary{% endif %}">
                            <i class="bi-floppy-fill"></i>
                            {% if action == 'create' %}
                                Créer
                            {% elif action == 'update' %}
                                Modifier
                            {% elif action == 'clone' %}
                                Dupliquer
                            {% else %}
                                Supprimer
                            {% endif %}
                        </button>
                    </div>
                    <div class="col col-6 text-end">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi-x-circle-fill"></i> Annuler</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
